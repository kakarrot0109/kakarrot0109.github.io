/* mobile phone and smart portable devices */
@media screen and (max-width: 479px) 
  .main
    padding-top 40pt
  .navbar
    display: none


  .navbar-mobile 
    display: block !important
    position: fixed
    width: 100%
    z-index: 100
    transition: all 0.15s ease-out
    .container 
      padding: 0
      margin: 0
      //height: 5em
      line-height: 5.5em
      background: $light-background-color

      .navbar-header 
        display: flex
        justify-content: space-between
        align-items: center
        width: 100%
        padding-right: 1em
        padding-left: 1em
        box-sizing: border-box
        position relative


        .menu-toggle 
          cursor: pointer
          line-height: 5.5em
          padding auto 2em

          span 
            display: block
            background: #000
            width: 36px
            height: 2px
            -webkit-border-radius: 3px
            -moz-border-radius: 3px
            border-radius: 3px
            -webkit-transition: .25s margin .25s, .25s transform
            -moz-transition: .25s margin .25s, .25s transform
            transition: .25s margin .25s, .25s transform

            .dark-theme & 
              background: $dark-font-color
            
          

          span:nth-child(1) 
            margin-bottom: 8px
          
          span:nth-child(3) 
            margin-top: 8px
          

          &.active 
            span 
              -webkit-transition: .25s margin, .25s transform .25s
              -moz-transition: .25s margin, .25s transform .25s
              transition: .25s margin, .25s transform .25s
            
            span:nth-child(1) 
              -moz-transform: rotate(45deg) translate(4px, 6px)
              -ms-transform: rotate(45deg) translate(4px, 6px)
              -webkit-transform: rotate(45deg) translate(4px, 6px)
              transform: rotate(45deg) translate(4px, 6px)
            

            span:nth-child(2) 
              opacity: 0
            

            span:nth-child(3) 
              -moz-transform: rotate(-45deg) translate(8px, -10px)
              -ms-transform: rotate(-45deg) translate(8px, -10px)
              -webkit-transform: rotate(-45deg) translate(8px, -10px)
              transform: rotate(-45deg) translate(8px, -10px)
            
          
        
      

      .menu 
        text-align: center
        background: #ffffff
        border-top: 1px solid #000000
        padding-top: 1em
        padding-bottom: 1em
        display: none
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1), 0px 4px 8px rgba(0, 0, 0, 0.1)
        a 
          //display: block

          //changed
          display inline-block
          margin 0 1em

          line-height: 2.5em
        

        &.active 
          display: block
          //changed
          white-space nowrap
          box-sizing border-box
          overflow-x auto

        .dark-theme & 
          background: $dark-background-color
          border-top: 2px solid $dark-font-secondary-color
        
      
      .dark-theme & 
        background: $dark-background-color !important
      
    
  

  .archive
    width 90%
    & .archive-item
      .archive-item-date
        display none


  #dynamic-to-top 
    display: none !important
  
  .footer 
    height: 3rem
    width: 100%
    text-align: center
    line-height: 1.5rem
    padding-top: 2em

  .post-warp
    padding-top: 6em
    .archive-item-date
      display: none

  .categories
    .categories-card
      .card-item
        width 100%
        display: flex
        min-height 0
        .categories
          overflow: hidden


/* iPads (portrait and landscape) ----------- */
@media screen and (max-width: 1023px)
  .navbar-mobile
    display none


/* Desktops and laptops ----------- */

@media screen and (min-width: 1024px)
  .navbar-mobile
    display none


/* post toc Style */
@media screen and (max-width: 1279px) // 最大宽度1279px时应用这条规则。（最大宽度小于1279px返回false，屏蔽规则。）
  .post-toc
    display none

  // ==============================
  // 移动端TOC悬浮按钮
  // ==============================
  .mobile-toc-btn
    display flex
    position fixed
    bottom 24px
    right 24px
    width 52px
    height 52px
    background #0071E3
    color #fff
    border-radius 50%
    align-items center
    justify-content center
    box-shadow 0 4px 16px rgba(0, 113, 227, 0.4)
    z-index 1000
    cursor pointer
    transition transform 0.2s ease, box-shadow 0.2s ease

    &:hover
      transform scale(1.05)
      box-shadow 0 6px 20px rgba(0, 113, 227, 0.5)

    &:active
      transform scale(0.95)

    .dark-theme &
      background #2997FF
      box-shadow 0 4px 16px rgba(41, 151, 255, 0.4)

  // ==============================
  // 移动端TOC抽屉
  // ==============================
  .mobile-toc-drawer
    position fixed
    bottom 0
    left 0
    right 0
    background $light-background-color
    border-radius 20px 20px 0 0
    max-height 70vh
    transform translateY(100%)
    transition transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)
    z-index 1001
    box-shadow 0 -4px 24px rgba(0, 0, 0, 0.15)
    overflow hidden

    &.active
      transform translateY(0)

    .drawer-header
      display flex
      justify-content space-between
      align-items center
      padding 16px 20px
      border-bottom 1px solid $light-border-color

      .drawer-title
        font-weight 600
        font-size 16px
        color $light-font-color

      .drawer-close
        font-size 28px
        color $light-font-secondary-color
        cursor pointer
        width 36px
        height 36px
        display flex
        align-items center
        justify-content center
        border-radius 50%
        transition background 0.15s ease

        &:hover
          background rgba(0, 0, 0, 0.05)

    .drawer-content
      padding 12px 20px 32px
      max-height calc(70vh - 60px)
      overflow-y auto
      -webkit-overflow-scrolling touch

      // tocbot 目录样式
      .toc-list
        list-style none
        padding-left 0
        margin 0

        .toc-list
          padding-left 16px

        .toc-list-item
          margin 8px 0

          a
            color $light-font-secondary-color
            text-decoration none
            font-size 14px
            line-height 1.6
            display block
            padding 6px 0
            transition color 0.15s ease

            &:hover
              color $light-navbar-active-color

          &.is-active-li > a
            color $light-navbar-active-color
            font-weight 500

    .dark-theme &
      background $dark-background-color
      box-shadow 0 -4px 24px rgba(0, 0, 0, 0.4)

      .drawer-header
        border-bottom-color $dark-border-color

        .drawer-title
          color $dark-font-color

        .drawer-close
          color $dark-font-secondary-color

          &:hover
            background rgba(255, 255, 255, 0.1)

      .drawer-content
        .toc-list-item a
          color $dark-font-secondary-color

          &:hover
            color $dark-navbar-active-color

        .toc-list-item.is-active-li > a
          color $dark-navbar-active-color

  // ==============================
  // 遮罩层
  // ==============================
  .drawer-overlay
    position fixed
    top 0
    left 0
    right 0
    bottom 0
    background rgba(0, 0, 0, 0.5)
    opacity 0
    visibility hidden
    transition opacity 0.3s ease
    z-index 1000

    &.active
      opacity 1
      visibility visible

// 大屏隐藏移动端TOC
@media screen and (min-width: 1280px)
  .mobile-toc-btn,
  .mobile-toc-drawer,
  .drawer-overlay
    display none !important